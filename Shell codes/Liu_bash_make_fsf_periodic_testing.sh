#!/bin/bash

declare -a s1
s1[1]=242
s1[2]=243
s1[3]=242
s1[4]=242
s1[5]=242
s1[6]=241
s1[7]=242
s1[8]=242
s1[9]=242
s1[10]=242
s1[11]=242
s1[12]=242
s1[13]=244
s1[14]=241
s1[15]=241
s1[16]=242
s1[17]=244
s1[18]=242
s1[19]=242
s1[20]=244
s1_nv[1]=188210176
s1_nv[2]=188987904
s1_nv[3]=188210176
s1_nv[4]=188210176
s1_nv[5]=188210176
s1_nv[6]=187432448
s1_nv[7]=188210176
s1_nv[8]=188210176
s1_nv[9]=188210176
s1_nv[10]=188210176
s1_nv[11]=188210176
s1_nv[12]=188210176
s1_nv[13]=189765632
s1_nv[14]=187432448
s1_nv[15]=187432448
s1_nv[16]=188210176
s1_nv[17]=189765632
s1_nv[18]=188210176
s1_nv[19]=188210176
s1_nv[20]=189765632
declare -a s2
s2[1]=242
s2[2]=243
s2[3]=242
s2[4]=242
s2[5]=242
s2[6]=242
s2[7]=242
s2[8]=242
s2[9]=242
s2[10]=242
s2[11]=242
s2[12]=242
s2[13]=244
s2[14]=242
s2[15]=241
s2[16]=241
s2[17]=243
s2[18]=244
s2[19]=242
s2[20]=243
s2_nv[1]=188210176
s2_nv[2]=188987904
s2_nv[3]=188210176
s2_nv[4]=188210176
s2_nv[5]=188210176
s2_nv[6]=188210176
s2_nv[7]=188210176
s2_nv[8]=188210176
s2_nv[9]=188210176
s2_nv[10]=188210176
s2_nv[11]=188210176
s2_nv[12]=188210176
s2_nv[13]=189765632
s2_nv[14]=188210176
s2_nv[15]=187432448
s2_nv[16]=187432448
s2_nv[17]=188987904
s2_nv[18]=189765632
s2_nv[19]=188210176
s2_nv[20]=188987904
declare -a s3
s3[1]=242
s3[2]=243
s3[3]=242
s3[4]=242
s3[5]=241
s3[6]=242
s3[7]=242
s3[8]=242
s3[9]=242
s3[10]=241
s3[11]=242
s3[12]=242
s3[13]=241
s3[14]=241
s3[15]=241
s3[16]=245
s3[17]=242
s3[18]=242
s3[19]=242
s3[20]=242
s3_nv[1]=188210176
s3_nv[2]=188987904
s3_nv[3]=188210176
s3_nv[4]=188210176
s3_nv[5]=187432448
s3_nv[6]=188210176
s3_nv[7]=188210176
s3_nv[8]=188210176
s3_nv[9]=188210176
s3_nv[10]=187432448
s3_nv[11]=188210176
s3_nv[12]=188210176
s3_nv[13]=187432448
s3_nv[14]=187432448
s3_nv[15]=187432448
s3_nv[16]=190543360
s3_nv[17]=188210176
s3_nv[18]=188210176
s3_nv[19]=188210176
s3_nv[20]=188210176
declare -a s4
s4[1]=241
s4[2]=242
s4[3]=242
s4[4]=242
s4[5]=242
s4[6]=242
s4[7]=242
s4[8]=242
s4[9]=242
s4[10]=241
s4[11]=242
s4[12]=241
s4[13]=245
s4[14]=245
s4[15]=241
s4[16]=242
s4[17]=246
s4[18]=242
s4[19]=241
s4[20]=251
s4_nv[1]=187432448
s4_nv[2]=188210176
s4_nv[3]=188210176
s4_nv[4]=188210176
s4_nv[5]=188210176
s4_nv[6]=188210176
s4_nv[7]=188210176
s4_nv[8]=188210176
s4_nv[9]=188210176
s4_nv[10]=187432448
s4_nv[11]=188210176
s4_nv[12]=187432448
s4_nv[13]=190543360
s4_nv[14]=190543360
s4_nv[15]=187432448
s4_nv[16]=188210176
s4_nv[17]=191321088
s4_nv[18]=188210176
s4_nv[19]=187432448
s4_nv[20]=195209728
declare -a s5
s5[1]=242
s5[2]=243
s5[3]=242
s5[4]=242
s5[5]=241
s5[6]=242
s5[7]=242
s5[8]=242
s5[9]=242
s5[10]=241
s5[11]=242
s5[12]=241
s5[13]=241
s5[14]=242
s5[15]=241
s5[16]=241
s5[17]=242
s5[18]=241
s5[19]=242
s5[20]=241
s5_nv[1]=188210176
s5_nv[2]=188987904
s5_nv[3]=188210176
s5_nv[4]=188210176
s5_nv[5]=187432448
s5_nv[6]=188210176
s5_nv[7]=188210176
s5_nv[8]=188210176
s5_nv[9]=188210176
s5_nv[10]=187432448
s5_nv[11]=188210176
s5_nv[12]=187432448
s5_nv[13]=187432448
s5_nv[14]=188210176
s5_nv[15]=187432448
s5_nv[16]=187432448
s5_nv[17]=188210176
s5_nv[18]=187432448
s5_nv[19]=188210176
s5_nv[20]=187432448
declare -a s6
s6[1]=242
s6[2]=242
s6[3]=242
s6[4]=242
s6[5]=241
s6[6]=242
s6[7]=242
s6[8]=242
s6[9]=242
s6[10]=242
s6[11]=242
s6[12]=242
s6[13]=242
s6[14]=242
s6[15]=242
s6[16]=242
s6[17]=242
s6[18]=242
s6[19]=242
s6[20]=242
s6_nv[1]=188210176
s6_nv[2]=188210176
s6_nv[3]=188210176
s6_nv[4]=188210176
s6_nv[5]=187432448
s6_nv[6]=188210176
s6_nv[7]=188210176
s6_nv[8]=188210176
s6_nv[9]=188210176
s6_nv[10]=188210176
s6_nv[11]=188210176
s6_nv[12]=188210176
s6_nv[13]=188210176
s6_nv[14]=188210176
s6_nv[15]=188210176
s6_nv[16]=188210176
s6_nv[17]=188210176
s6_nv[18]=188210176
s6_nv[19]=188210176
s6_nv[20]=188210176
declare -a s7
s7[1]=243
s7[2]=242
s7[3]=242
s7[4]=242
s7[5]=243
s7[6]=241
s7[7]=242
s7[8]=242
s7[9]=241
s7[10]=242
s7[11]=244
s7[12]=242
s7[13]=241
s7[14]=242
s7[15]=241
s7[16]=262
s7[17]=242
s7[18]=241
s7[19]=242
s7[20]=242
s7_nv[1]=188987904
s7_nv[2]=188210176
s7_nv[3]=188210176
s7_nv[4]=188210176
s7_nv[5]=188987904
s7_nv[6]=187432448
s7_nv[7]=188210176
s7_nv[8]=188210176
s7_nv[9]=187432448
s7_nv[10]=188210176
s7_nv[11]=189765632
s7_nv[12]=188210176
s7_nv[13]=187432448
s7_nv[14]=188210176
s7_nv[15]=187432448
s7_nv[16]=203764736
s7_nv[17]=188210176
s7_nv[18]=187432448
s7_nv[19]=188210176
s7_nv[20]=188210176
declare -a s8
s8[1]=243
s8[2]=242
s8[3]=242
s8[4]=242
s8[5]=245
s8[6]=242
s8[7]=242
s8[8]=242
s8[9]=242
s8[10]=242
s8[11]=254
s8[12]=243
s8[13]=241
s8[14]=255
s8[15]=242
s8[16]=254
s8[17]=243
s8[18]=241
s8[19]=320
s8[20]=254
s8_nv[1]=188987904
s8_nv[2]=188210176
s8_nv[3]=188210176
s8_nv[4]=188210176
s8_nv[5]=190543360
s8_nv[6]=188210176
s8_nv[7]=188210176
s8_nv[8]=188210176
s8_nv[9]=188210176
s8_nv[10]=188210176
s8_nv[11]=197542912
s8_nv[12]=188987904
s8_nv[13]=187432448
s8_nv[14]=198320640
s8_nv[15]=188210176
s8_nv[16]=197542912
s8_nv[17]=188987904
s8_nv[18]=187432448
s8_nv[19]=248872960
s8_nv[20]=197542912

# generated on mac, path are for server
# mac

for sub in {1..20}; do

      if [ $sub -eq 1 ];then
          ith_sub_str='01'
      fi
      if [ $sub -eq 2 ];then
          ith_sub_str='02'
      fi
      if [ $sub -eq 3 ];then
          ith_sub_str='03'
      fi
      if [ $sub -eq 4 ];then
          ith_sub_str='04'
      fi
      if [ $sub -eq 5 ];then
          ith_sub_str='05'
      fi
      if [ $sub -eq 6 ];then
          ith_sub_str='06'
      fi
      if [ $sub -eq 7 ];then
          ith_sub_str='07'
      fi
      if [ $sub -eq 8 ];then
          ith_sub_str='08'
      fi
      if [ $sub -eq 9 ];then
          ith_sub_str='09'
      fi
      if [ $sub -eq 10 ];then
          ith_sub_str='10'
      fi
      if [ $sub -eq 11 ];then
          ith_sub_str='11'
      fi
      if [ $sub -eq 12 ];then
          ith_sub_str='12'
      fi
      if [ $sub -eq 13 ];then
          ith_sub_str='13'
      fi
      if [ $sub -eq 14 ];then
          ith_sub_str='14'
      fi
      if [ $sub -eq 15 ];then
          ith_sub_str='15'
      fi
      if [ $sub -eq 16 ];then
          ith_sub_str='16'
      fi
      if [ $sub -eq 17 ];then
          ith_sub_str='17'
      fi
      if [ $sub -eq 18 ];then
          ith_sub_str='18'
      fi
      if [ $sub -eq 19 ];then
          ith_sub_str='19'
      fi
      if [ $sub -eq 20 ];then
          ith_sub_str='20'
      fi

  for session in 2 4 6 8; do #2 4 6 8 1 3 5 7
    if [ $session -eq 1 ];then
      NUM_VOLUME=${s1[$sub]}
      NUM_VOXEL=${s1_nv[$sub]}
    fi
    if [ $session -eq 2 ];then
      NUM_VOLUME=${s2[$sub]}
      NUM_VOXEL=${s2_nv[$sub]}
    fi
    if [ $session -eq 3 ];then
      NUM_VOLUME=${s3[$sub]}
      NUM_VOXEL=${s3_nv[$sub]}
    fi
    if [ $session -eq 4 ];then
      NUM_VOLUME=${s4[$sub]}
      NUM_VOXEL=${s4_nv[$sub]}
    fi
    if [ $session -eq 5 ];then
      NUM_VOLUME=${s5[$sub]}
      NUM_VOXEL=${s5_nv[$sub]}
    fi
    if [ $session -eq 6 ];then
      NUM_VOLUME=${s6[$sub]}
      NUM_VOXEL=${s6_nv[$sub]}
    fi
    if [ $session -eq 7 ];then
      NUM_VOLUME=${s7[$sub]}
      NUM_VOXEL=${s7_nv[$sub]}
    fi
    if [ $session -eq 8 ];then
      NUM_VOLUME=${s8[$sub]}
      NUM_VOXEL=${s8_nv[$sub]}
    fi

    fiting_type="testing" #training testing
    server_root="/Users/bo/Documents/data_liujia_lab/analysis_liuP1_greeble"
    Standard_brain_dir=$server_root"/brainmask/fsl_standard/MNI152_T1_2mm_brain"
    BOLD_IMAGE=$server_root"/MRI_filtered_bold_nosmooth_fieldmap/filtered_nosmooth_sub"$sub"_s"$session".nii.gz"
    MOTION_para=$server_root"/MRI_motion_parameter_fieldmap/sub"$sub"_s"$session".txt"
   

    Parameter="3"
    TEMPLATE_PATH="/Users/bo/Documents/script_bash/batch_periodic_template_"$fiting_type"_2024.fsf"
    OUTPUTDIR=$server_root"/liujia_formal_sub"$ith_sub_str"/periodic_2403_"$fiting_type"_"$Parameter"_fieldmap_anathpc_aal_fixtrial_s"$session
    EV_file_name_cos_test="sub"$sub"_s"$session"_obj_test_"$Parameter"_no_cali_anathpc_aal_fixtrial.txt"
    EV_file_name_fix="sub"$sub"_s"$session"_fixation.txt"
    EV_file_name_lure="sub"$sub"_s"$session"_empty_trial.txt"

    sed -e 's@OUTPUTDIR@'$OUTPUTDIR'@g' \
    -e 's@NUM_VOLUME@'$NUM_VOLUME'@g' \
    -e 's@EV_file_name_cos_test@'$EV_file_name_cos_test'@g' \
    -e 's@EV_file_name_fix@'$EV_file_name_fix'@g' \
    -e 's@EV_file_name_lure@'$EV_file_name_lure'@g' \
    -e 's@MOTION_para@'$MOTION_para'@g' \
    -e 's@NUM_VOXEL@'$NUM_VOXEL'@g' \
    -e 's@BOLD_IMAGE@'$BOLD_IMAGE'@g' \
    -e 's@server_root@'$server_root'@g' \
    -e 's@Standard_brain_dir@'$Standard_brain_dir'@g' <$TEMPLATE_PATH> "/Users/bo/Documents/script_bash/template_periodic_testing_anathpc_aal_fixtrial/fsf_"$Parameter"_sub"$sub"_s"$session".fsf"

  done
done


